
<div class="full-height m-t-40">
    <!-- TABLES VIEW -->
    <div class="container-fluid container-fixed-lg">
        <!-- START PANEL -->
        <div class="panel panel-transparent">
            <div class="panel-heading">
                <div class="panel-title">Room Rate
                </div>
                <div class="pull-right" style="width: 60%;">
                    <!--<button id="show-modal2" class="btn btn-primary pull-right" ng-click="openAdvancedFilter(true)" ng-show="buttonCreate"><i class="fa fa-search"></i></button>-->
                    <button id="show-modal" class="btn btn-primary btn-cons pull-right" ng-click="openQuickView('add')" ng-show="buttonCreate"><i class="fa fa-plus"></i> Add Rate</button>
                    <span ng-click="exportExcel()">
                        <div excel-export export-data="exportData" file-name="{{fileName}}" class="pull-right m-r-5" control="focusinControl" ></div>
                    </span>

                    <div class="input-group date col-sm-4 pull-right m-r-10">
                        <input type="text" id="search-table" class="form-control pull-right" placeholder="Search name..." ng-keyup="filter('search',$event)" ng-model="filterVal.search">
                    </div>

                </div>
                <div class="clearfix"></div>
                <div class="tools">
                    <a class="collapse" href="javascript:;"></a>
                    <a class="config" data-toggle="modal" href="#grid-config"></a>
                    <a class="reload" href="javascript:;"></a>
                    <a class="remove" href="javascript:;"></a>
                </div>
                <!--<div class="panel panel-default m-t-5" pg-portlet ng-show="showAdvance">
                <div class="panel-heading">
                <div class="panel-title">Advanced Search
            </div>
            <div class="panel-controls">
            <ul>
            <li><a href="" ng-click="openAdvancedFilter(false)"><i class="portlet-icon portlet-icon-close"></i></a>
        </li>
    </ul>
</div>
</div>
<div class="panel-body" >
<div class="btn-group form-group-default-select pull-left  m-r-5">
<label>Department:</label><br />
<ui-select ng-model="selected.filter_department.selected" theme="bootstrap"  style="width:150px;">
<ui-select-match placeholder="Select Department">{{$select.selected.name}}</ui-select-match>
<ui-select-choices repeat="item in departments | filter: $select.search">
<span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
</ui-select-choices>
</ui-select>
</div>
<div class="btn-group form-group-default-select pull-left  m-r-5">
<label>Account Type:</label><br />
<ui-select ng-model="selected.filter_account_type.selected" theme="bootstrap" style="width:150px;">
<ui-select-match placeholder="Select Type">{{$select.selected.name}}</ui-select-match>
<ui-select-choices repeat="item in account_types | filter: $select.search">
<div ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></div>

</ui-select-choices>
</ui-select>
</div>

<div class="btn-group dropdown-default  m-r-5" >
<label>&nbsp;</label><br />
<button id="show-modal" class="btn btn-primary pull-right m-r-5" ng-click="applyFilter()" ><i class="fa fa-search"></i> Apply</button>

</div>

</div>
</div>-->
</div>
<div class="panel-body">
    <div class="table-responsive">
        <table class="table table-hover table-condensed " datatable="" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstance" >
        </table>
    </div>
</div>
</div>
<!-- END PANEL -->
</div>

<!--START FORM INPUT-->
<div class="modal fade slide-right form-input-full" id="form-input" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content-wrapper">
            <div class="modal-content" style="background-image: url('pages/mtbgform.png');">
                <div class="panel-heading">
                    <div class="panel-title">Room Rate Information</div>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="pg-close fs-14"></i>
                    </button>
                </div>
                <div class="container-xs-height full-height">
                    <div class="row-xs-height">
                        <div class="modal-body col-xs-height col-top">

                            <!-- START FORM -->
                            <div class="panel panel-transparent m-t-20">

                                <ul class="nav nav-tabs nav-tabs-fillup" pg-tab-dropdownfx>
                                    <li class="active">
                                        <a data-toggle="tab" pg-tab href="#tab-fillup1"><span>Room Rate</span></a>
                                    </li>
                                    <li>
                                        <a data-toggle="tab" pg-tab href="#tab-fillup2" ><span>Package</span></a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab-fillup1">
                                        <form id="form-user" role="form" autocomplete="off" name="dodol" novalidate>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default required" ng-class="{ 'has-error' : coa.code.$invalid && !coa.code.$pristine }">
                                                        <label>Rate Code</label>
                                                        <input type="text" class="form-control" name="code" id="coa_code" ng-model="coa.code" ui-jq="popover" data-container="body" data-placement="top" data-content="This field is required" data-trigger="manual" validate-attached-form-element required>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select  " >
                                                        <label>Rate Type</label>
                                                        <ui-select ng-model="selected.rate_type.selected" theme="bootstrap">
                                                            <ui-select-match placeholder="select type">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in rate_type | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Cashier</label>
                                                        <input type="text" class="form-control" name="cashier" ng-model="coa.cashier" >
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="row clearfix">
                                                <div class="col-sm-6">
                                                    <div pg-form-group class="form-group form-group-default required" ng-class="{ 'has-error' : coa.name.$invalid && !coa.name.$pristine }">
                                                        <label>Description</label>
                                                        <input type="text" class="form-control" name="name" ng-model="coa.name" ui-jq="popover" data-container="body" data-placement="top" data-content="This field is required" data-trigger="manual" validate-attached-form-element required>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Check In</label>
                                                        <input type="text" class="form-control" name="check_in" ng-model="coa.check_in" >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select  required" ng-class="{ 'has-error' : selected.currency.selected.$invalid && !selected.currency.selected.$pristine }">
                                                        <label>Currency</label>
                                                        <ui-select ng-model="selected.currency.selected" theme="bootstrap" validate-attached-form-element required>
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in currency | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select  required" ng-class="{ 'has-error' : selected.status.selected.$invalid && !selected.status.selected.$pristine }">
                                                        <label>Status</label>
                                                        <ui-select ng-model="selected.status.selected" theme="bootstrap" validate-attached-form-element required>
                                                            <ui-select-match placeholder="select status">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in status | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Valid Date From</label>
                                                        <input type="text" class="form-control" ng-model="coa.valid_date_from" name="valid_date_from" placeholder="Pick a date" data-date-format="yyyy-mm-dd" ui-jq="datepicker" >
                                                        <!--<input type="text" class="form-control" name="valid_date_from" ng-model="coa.valid_date_from" >-->
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Valid Date Until</label>
                                                        <input type="text" class="form-control" ng-model="coa.valid_date_until" name="valid_date_until" placeholder="Pick a date" data-date-format="yyyy-mm-dd" ui-jq="datepicker" >
                                                        <!--<input type="text" class="form-control" name="valid_date_until" ng-model="coa.valid_date_until" >-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Room Charge Type</label>
                                                        <ui-select ng-model="selected.room_transc_type.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in room_transc_type | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.code | highlight: $select.search))"></span>
                                                                (<small ng-bind-html="trustAsHtml((item.folio_text | highlight: $select.search))"></small>)
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Extra Bed Charge Type</label>
                                                        <ui-select ng-model="selected.ext_bed_transc_type.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in ext_bed_transc_type | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.code | highlight: $select.search))"></span>
                                                                (<small ng-bind-html="trustAsHtml((item.folio_text | highlight: $select.search))"></small>)
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Discount Charge Type</label>
                                                        <ui-select ng-model="selected.disc_transc_type.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in disc_transc_type | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.code | highlight: $select.search))"></span>
                                                                (<small ng-bind-html="trustAsHtml((item.folio_text | highlight: $select.search))"></small>)
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Max Discount(%)</label>
                                                        <input type="text" class="form-control" name="max_discount_prcn" ng-model="coa.max_discount_prcn" >
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Extra Bed Cost</label>
                                                        <input type="text" class="form-control" name="extra_bed_cost" ng-model="coa.extra_bed_cost" >
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Rhythm Type</label>
                                                        <ui-select ng-model="selected.rhythm_type.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in rhythm_type | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Benefit</label>
                                                        <ui-select ng-model="selected.pension.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in pension | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Day Period</label>
                                                        <input type="number" class="form-control" name="day_period" ng-model="coa.day_period" >
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>Description</label>
                                                        <input type="text" class="form-control" name="name" ng-model="coa.description" >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row clearfix">
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select  " >
                                                        <label>Room Only Voucher</label>
                                                        <ui-select ng-model="selected.is_room_only_voucher.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in yesno | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div pg-form-group class="form-group form-group-default form-group-default-select " >
                                                        <label>Is Require Deposit</label>
                                                        <ui-select ng-model="selected.is_require_deposit.selected" theme="bootstrap" >
                                                            <ui-select-match placeholder="select..">{{$select.selected.name}}</ui-select-match>
                                                            <ui-select-choices repeat="item in yesno | filter: $select.search">
                                                                <span ng-bind-html="trustAsHtml((item.name | highlight: $select.search))"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div pg-form-group class="form-group form-group-default">
                                                        <label>User Display Description</label>
                                                        <input type="text" class="form-control" name="name" ng-model="coa.user_display_description" >
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="row clearfix">
                                                <div class="col-sm-12">
                                                    <h4>Rate</h4>
                                                    <!--<div ng-if="show.itemTable" id="divItem" >-->
                                                    <div ng-controller="EditableTableRateCtrl" ng-form editable-form name="tableform" onaftersave="child.saveTable()" oncancel="cancel()">


                                                        <!-- table -->
                                                        <table class="table  table-hover itemtable">
                                                            <thead>
                                                                <tr>
                                                                    <th width="10%">Room Type</th>
                                                                    <th width="10%">Rate 1 Person</th>
                                                                    <th width="10%">Rate 2 Person</th>
                                                                    <th width="10%">Rate 3 Person</th>
                                                                    <th width="10%">Rate 4 Person</th>
                                                                    <th width="10%">Additional Person</th>
                                                                    <th width="10%">Additional Child</th>
                                                                    <th width="10%">Late Check Out Charge</th>
                                                                </tr>
                                                            </thead>

                                                            <tbody>
                                                                <tr ng-repeat="item in items | filter:filterUser">
                                                                    <td><span>{{item.name}}</span></td>

                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.rate_1_person" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'rate_1_person')" >
                                                                            {{ item.rate_1_person||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.rate_2_person" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'rate_2_person')">
                                                                            {{ item.rate_2_person||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.rate_3_person" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'rate_3_person')">
                                                                            {{ item.rate_3_person||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.rate_4_person" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'rate_4_person')">
                                                                            {{ item.rate_4_person||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.additional_person" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'additional_person')">
                                                                            {{ item.additional_person||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.additional_child" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'additional_child')">
                                                                            {{ item.additional_child||'Not valid' }}
                                                                        </span>
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        <span editable-text="item.late_checkout_charge" theme="bootstrap" e-form="tableform" data-e-ng-keyup="setVal($event,item.id,$data,'late_checkout_charge')">
                                                                            {{ item.late_checkout_charge||'Not valid' }}
                                                                        </span>
                                                                    </td>

                                                                </tr>
                                                            </tbody>
                                                        </table>

                                                        <!-- buttons -->
                                                        <div class="btn-edit">
                                                            <button type="button" class="btn btn-primary" ng-show="!tableform.$visible" ng-click="tableform.$show()">
                                                                Modify Item List
                                                            </button>
                                                        </div>
                                                        <div class="btn-form" ng-show="tableform.$visible">

                                                            <button type="submit" ng-disabled="tableform.$waiting" ng-click="tableform.$hide();child.saveTable(0)" class="btn btn-primary"> Save Item</button>
                                                            <!--<button type="button" ng-disabled="tableform.$waiting" ng-click="addUser()" class="btn btn-primary "> Add New Item</button>-->
                                                            <button type="button" ng-disabled="tableform.$waiting" ng-click="tableform.$cancel()" class="btn btn-default">Cancel</button>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>



                                        <br>
                                        <div class="clearfix"></div>
                                        <!--<button class="btn btn-primary" type="submit" ng-disabled="dodol.$invalid" ng-click="submit()" >Save</button>
                                        <button class="btn btn-default"><i class="pg-close"></i> Clear</button>-->
                                    </form>
                                </div>
                                <div class="tab-pane" id="tab-fillup2">
                                    <div class="row clearfix">
                                        <div class="col-md-3">
                                            <div pg-form-group class="form-group form-group-default " >
                                                <label>Rate Code</label>
                                                <input type="text" ng-readonly="true" class="form-control" ng-model="coa.code">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div pg-form-group class="form-group form-group-default ">
                                                <label>Description</label>
                                                <input type="text" ng-readonly="true" class="form-control" name="name" ng-model="coa.name" >
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div pg-form-group class="form-group form-group-default ">
                                                <label>Currency</label>
                                                <input type="text" ng-readonly="true" class="form-control" name="name" ng-model="selected.currency.selected.name" >
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-5">
                                        <h5>Available Packages</h5>
                                        <table class="table table-condensed">
                                            <thead>
                                                <th>Code</th>
                                                <th>Name</th>
                                                <th>Tax</th>
                                                <th>Charge</th>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="a in avail_pack" ng-click="highlight(a)">
                                                    <td style="background:{{a.bg}}">{{a.code}}</td>
                                                    <td style="background:{{a.bg}}">{{a.name}}</td>
                                                    <td style="background:{{a.bg}}"><input ng-disabled="true" type="checkbox" ng-checked="a.is_tax_included==true" ng-true-value="true" ng-false-value="false"></td>
                                                    <td style="background:{{a.bg}}">{{a.flat_rate|number:fractionSize}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-1" style="margin-top:10vh;">
                                        <button class="btn btn-primary" type="submit" ng-click="moveRight()" ng-disabled="mr"><i class="fa fa-chevron-right"></i> </button>
                                        <br>
                                        <button style="margin-top:2vh;" class="btn btn-primary" type="submit" ng-click="moveLeft()" ng-disabled="!mr"><i class="fa fa-chevron-left"></i></button>
                                    </div>
                                    <div class="col-md-5">
                                        <h5>Attached Packages</h5>
                                        <table class="table table-condensed">
                                            <thead>
                                                <th>Code</th>
                                                <th>Name</th>
                                                <th>Tax</th>
                                                <th>Charge</th>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="a in attach_pack" ng-click="highlightOth(a)">
                                                    <td style="background:{{a.bg}}">{{a.code}}</td>
                                                    <td style="background:{{a.bg}}">{{a.name}}</td>
                                                    <td style="background:{{a.bg}}"><input ng-disabled="true" type="checkbox" ng-checked="a.is_tax_included==true" ng-true-value="true" ng-false-value="false"></td>
                                                    <td style="background:{{a.bg}}">{{a.flat_rate|number:fractionSize}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                                <div class="clearfix"></div>
                                <button class="btn btn-primary" type="submit" ng-disabled="dodol.$invalid" ng-click="submit()" >Save</button>
                                <button class="btn btn-default"><i class="pg-close"></i> Clear</button>
                            </div>


                        </div>
                        <!-- END FORM -->

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.modal-content -->
</div>
<!-- /.modal-dialog -->
</div>
<!--END FORM INPUT-->

<!-- START MODAL CONTENT-->
<div class="modal fade slide-up disable-scroll" id="modalDelete" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content-wrapper">
            <div class="modal-content">
                <div class="modal-body text-center m-t-20">
                    <h4 class="no-margin p-b-10">Are you sure want to delete {{coa.name}} ?</h4>
                    <div >
                        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="execDelete()">Yes</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</div>
<!-- END MODAL CONTENT-->
